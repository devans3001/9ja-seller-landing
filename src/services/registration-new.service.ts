// New registration service - implement from scratch